
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Glossaire KF dynamique</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    select { padding: 5px; width: 320px; margin-bottom: 10px; }
    p { margin-top: 10px; }
  </style>
</head>
<body>
  <h2>Glossaire des KF</h2>
  <select id="kfSelector"></select>
  <p id="descEN"></p>
  <p id="descFR"></p>

  <script>
    async function loadCSV(url) {
      const response = await fetch(url);
      const text = await response.text();
      const rows = text.trim().split('
').map(row => row.split(';'));
      const headers = rows[0];
      const data = rows.slice(1).map(row => {
        let obj = {};
        headers.forEach((header, i) => {
          obj[header.trim()] = row[i] ? row[i].trim() : '';
        });
        return obj;
      });
      return data;
    }

    function populateOptions(data) {
      const select = document.getElementById('kfSelector');
      select.innerHTML = '';
      data.forEach(item => {
        const kf = item['To be rename'] || '';
        const option = document.createElement('option');
        option.value = kf;
        option.textContent = kf;
        select.appendChild(option);
      });
    }

    window.onload = async function() {
      const csvUrl = 'Glossaire%20KF%20IBP.csv'; // fichier local dans le même dossier
      const data = await loadCSV(csvUrl);

      const select = document.getElementById('kfSelector');
      const descEN = document.getElementById('descEN');
      const descFR = document.getElementById('descFR');

      populateOptions(data);

      select.addEventListener('change', function() {
        const selectedKF = this.value;
        const entry = data.find(d => d['To be rename'] === selectedKF);
        if (entry) {
          descEN.textContent = 'EN: ' + (entry['Detailed explanation of the KF (EN)'] || 'non disponible');
          descFR.textContent = 'FR: ' + (entry['Explication detaillée de la KF (FR)'] || 'non disponible');
        }
      });
    }
  </script>
</body>
</html>
