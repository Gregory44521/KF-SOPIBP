<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Affichage des descriptions KF</title>
<style>
body { font-family: "Segoe UI", Arial, sans-serif; margin: 40px; background-color: #f4f6f8; color: #333; }
h1 { text-align: center; color: #2c3e50; }
#container { max-width: 900px; margin: 0 auto; background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
label { font-weight: bold; display: block; margin-bottom: 10px; }
input[type="text"] { width: 100%; padding: 10px; font-size: 1rem; border: 1px solid #ccc; border-radius: 8px; margin-bottom: 15px; }
select { width: 100%; padding: 10px; font-size: 1rem; border: 1px solid #ccc; border-radius: 8px; margin-bottom: 30px; }
.desc-container { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
.desc-box { background: #f9fafc; border: 1px solid #ddd; border-radius: 10px; padding: 20px; min-height: 150px; transition: all 0.3s ease; }
.desc-box:hover { background: #eef2f7; }
.desc-box h3 { margin-top: 0; color: #1a5276; font-size: 1.1rem; border-bottom: 1px solid #ccc; padding-bottom: 5px; }
.desc-text { margin-top: 10px; white-space: pre-wrap; }
footer { text-align: center; margin-top: 40px; font-size: 0.85rem; color: #888; }
</style>
</head>
<body>
<div id="container">
  <h1>Affichage des descriptions par KF</h1>

  <!-- Input pour rechercher KF -->
  <label for="kfSearch">Rechercher une KF / search for a KF :</label>
  <input type="text" id="kfSearch" placeholder="Tapez pour filtrer les KF..." />

  <!-- S√©lection de KF -->
  <label for="kfSelect">S√©lectionnez une KF / Select a KF :</label>
  <select id="kfSelect">
    <option value="">-- Choisissez une KF --</option>
  </select>

  <!-- Affichage des descriptions -->
  <div class="desc-container">
    <div class="desc-box">
      <h3>Description EN</h3>
      <div id="descEN" class="desc-text"></div>
    </div>
    <div class="desc-box">
      <h3>Description FR</h3>
      <div id="descFR" class="desc-text"></div>
    </div>
  </div>
</div>

<footer>¬© 2025 - Gregory Troalen ü§£ </footer>

<!-- Librairie SheetJS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

<script>
const select = document.getElementById('kfSelect');
const search = document.getElementById('kfSearch');

let data = [];

// Remplit la liste d√©roulante avec les KF
function fillDropdown(list) {
  select.innerHTML = '<option value="">-- Choisissez une KF --</option>';
  list.forEach(item => {
    const opt = document.createElement('option');
    opt.value = item.KF;
    opt.textContent = item.KF;
    select.appendChild(opt);
  });
  document.getElementById('descEN').textContent = '';
  document.getElementById('descFR').textContent = '';
}

// Filtrage dynamique
search.addEventListener('input', () => {
  const query = search.value.toLowerCase();
  const filtered = data.filter(d => d.KF && d.KF.toLowerCase().includes(query));
  fillDropdown(filtered);
});

// Affichage des descriptions
select.addEventListener('change', () => {
  const chosen = data.find(d => d.KF === select.value);
  console.log('Choisi:', chosen); // ‚úÖ Debug
  document.getElementById('descEN').textContent = chosen ? chosen.DescEN : '';
  document.getElementById('descFR').textContent = chosen ? chosen.DescFR : '';
});

// üöÄ Chargement automatique du fichier Excel
window.addEventListener('DOMContentLoaded', () => {
  fetch('https://raw.githubusercontent.com/Gregory44521/KF-SOPIBP/main/GlossaireKIBP.xlsx')
    .then(response => {
      if (!response.ok) throw new Error('Fichier Excel introuvable.');
      return response.arrayBuffer();
    })
    .then(buffer => {
      const workbook = XLSX.read(buffer, { type: 'array' });
      const sheetName = workbook.SheetNames[0];
      const sheet = workbook.Sheets[sheetName];
      data = XLSX.utils.sheet_to_json(sheet);
      console.log(data);
      fillDropdown(data);
      console.log('‚úÖ Fichier Excel charg√© automatiquement.');
    })
    .catch(err => {
      console.error('‚ùå Erreur de chargement automatique :', err);
    });
});
</script>
</body>
</html>





